(()=>{"use strict";var e={859:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(480));t.default=class{constructor(){o.default.config.update({region:"ap-northeast-1"}),this._documentClient=new o.default.DynamoDB.DocumentClient}get documentClient(){return this._documentClient||(this._documentClient=new o.default.DynamoDB.DocumentClient),this._documentClient}dataMapper(e){return e.Items.map((e=>({id:e.id||"",createdAt:e.createdAt||"",fileName:e.fileName||"",category:e.category||"",media:e.media||"",title:e.title||"",eyeCatchURL:e.eyeCatchURL||"",tag:e.tag||[""],updatedAt:e.updatedAt||""})))}async getAll(){const e=this.documentClient,t=await e.query({TableName:"sublog",IndexName:"media-createdAt-index",ScanIndexForward:!1,KeyConditionExpression:"media = :media",ExpressionAttributeValues:{":media":"sublog"}}).promise().catch((e=>e));return this.dataMapper(t)}async getById(e){const t=this.documentClient,a={TableName:"sublog",KeyConditionExpression:"id = :id",ExpressionAttributeValues:{":id":e}},r=await t.query(a).promise().catch((e=>e));return this.dataMapper(r)[0]}async getByFileName(e){const t=this.documentClient,a={TableName:"sublog",IndexName:"fileName-index",KeyConditionExpression:"fileName = :fileName",ExpressionAttributeValues:{":fileName":e}},r=await t.query(a).promise().catch((e=>e));return this.dataMapper(r)[0]}async getByCategory(e){const t=this.documentClient,a={TableName:"sublog",IndexName:"category-createdAt-index",ScanIndexForward:!1,KeyConditionExpression:"category = :category",ExpressionAttributeValues:{":category":e}},r=await t.query(a).promise().catch((e=>e));return this.dataMapper(r)}}},432:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(232),n=a(793),i=r(a(859)),s=a(352),d=n.importSchema("src/schema.gql");new o.ApolloServer({typeDefs:d,resolvers:s.resolvers,dataSources:()=>({dynamoDB:new i.default})}).listen().then((({url:e})=>{console.log(`ðŸš€ Server ready at ${e}`)}))},352:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolvers=void 0,t.resolvers={Query:{getById:async(e,t,{dataSources:a})=>{const r=t.id||"";return await a.dynamoDB.getById(r)},getAll:async(e,t,{dataSources:a})=>await a.dynamoDB.getAll(),getByFileName:async(e,t,{dataSources:a})=>{const r=t.fileName||"";return await a.dynamoDB.getByFileName(r)},getByCategory:async(e,t,{dataSources:a})=>{const r=t.category||"";return await a.dynamoDB.getByCategory(r)}}}},232:e=>{e.exports=require("apollo-server")},480:e=>{e.exports=require("aws-sdk")},793:e=>{e.exports=require("graphql-import")}},t={};!function a(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}(432)})();